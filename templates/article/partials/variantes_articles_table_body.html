{% load commande_filters %}
{% for variante in page_obj %}
<tr class="hover:bg-gray-50 transition-colors duration-200">
    <td class="px-4 py-3 border-r border-b border-gray-200">
        <input type="checkbox" class="article-checkbox form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500" data-article-id="{{ variante.article.id }}" />
    </td>
    <td class="px-4 py-3 border-r border-b border-gray-200">
        <div class="flex items-center">
            <div class="flex-shrink-0 h-10 w-10">
                {% if variante.article.image %}
                    <img class="h-10 w-10 rounded-lg object-cover" src="{{ variante.article.image.url }}" alt="{{ variante.article.nom }}">
                {% elif variante.article.image_url %}
                    <img class="h-10 w-10 rounded-lg object-cover" src="{{ variante.article.image_url }}" alt="{{ variante.article.nom }}">
                {% else %}
                    <div class="h-10 w-10 rounded-lg bg-gray-200 flex items-center justify-center">
                        <i class="fas fa-box text-gray-400"></i>
                    </div>
                {% endif %}
            </div>
            <div class="ml-3">
                <div class="text-sm font-medium text-gray-900">{{ variante.article.nom }}</div>
                <div class="text-sm text-gray-500">{{ variante.article.reference|default:'N/A' }}</div>
            </div>
        </div>
    </td>
    <td class="px-4 py-3 border-r border-b border-gray-200">
        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
            {{ variante.article.categorie.nom|default:'N/A' }}
        </span>
    </td>
    <td class="px-4 py-3 border-r border-b border-gray-200">
        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
            {{ variante.couleur.nom }}
        </span>
    </td>
    <td class="px-4 py-3 border-r border-b border-gray-200">
        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
            {{ variante.pointure.pointure }}
        </span>
    </td>
    <td class="px-4 py-3 border-r border-b border-gray-200">
        {% with variante.article|get_prix_avec_phase_simple as prix_info %}
        <div class="text-sm font-medium {{ prix_info.couleur_classe }}">{{ prix_info.prix|floatformat:2 }} DH</div>
        <div class="text-xs text-gray-500">{{ prix_info.libelle }}</div>
        {% endwith %}
    </td>
    <td class="px-4 py-3 border-r border-b border-gray-200">
        <div class="flex items-center">
            {% if variante.qte_disponible > 0 %}
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    {{ variante.qte_disponible }}
                </span>
            {% else %}
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                    Rupture
                </span>
            {% endif %}
        </div>
    </td>
    <td class="px-4 py-3 border-b border-gray-200">
        <div class="flex items-center space-x-2">
            <a href="{% url 'article:detail' variante.article.id %}" class="text-blue-500 hover:text-blue-700" title="Voir DÃ©tails">
                <i class="fas fa-eye"></i>
            </a>
            <a href="{% url 'article:modifier' variante.article.id %}" class="text-yellow-500 hover:text-yellow-700" title="Modifier">
                <i class="fas fa-edit"></i>
            </a>
            <button type="button" onclick="confirmDeleteArticle('{% url 'article:supprimer' variante.article.id %}', '{{ variante.article.nom|escapejs }}')" class="text-red-500 hover:text-red-700" title="Supprimer">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </td>
</tr>
{% endfor %}

