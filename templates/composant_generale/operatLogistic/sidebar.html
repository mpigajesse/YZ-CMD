<!-- Sidebar avec animation - Thème Opérateur Logistique Bleu -->
<div id="sidebar" class="h-full shadow-2xl border-r overflow-hidden z-50 flex flex-col" style="background: linear-gradient(to bottom, var(--logistic-primary), var(--logistic-dark)); border-color: var(--logistic-border-accent); color: var(--logistic-text-light);">
    <!-- En-tête -->
    <div class="p-4 border-b flex items-center justify-between flex-shrink-0" style="border-color: var(--logistic-border-accent);">
        <div>
            <h1 class="text-xl font-bold text-white whitespace-nowrap">YZ-CMD</h1>
            <p class="text-sm text-white whitespace-nowrap opacity-80">Opérateur Logistique</p>
        </div>
        <button id="sidebar-toggle" class="p-2 rounded-lg transition-colors duration-200 lg:hidden hover:bg-opacity-20 hover:bg-white" style="hover:background-color: var(--logistic-hover-bg);">
            <i class="fas fa-times text-lg text-white"></i>
        </button>
    </div>
    
    <!-- Navigation Menu avec scrollbar personnalisée -->
    <nav class="flex-1 overflow-y-auto py-4 scrollbar-custom">
        <!-- Gestion de Commandes Dropdown -->
        <div class="mb-2">
            <div id="dropdown-commandes" class="flex items-center justify-between px-4 py-2 cursor-pointer hover:bg-opacity-20 hover:bg-white transition-all duration-200" style="color: var(--logistic-text-light); opacity: 0.8; border-color: var(--logistic-border-accent);">
                <div class="flex items-center">
                    <i class="fas fa-box-open mr-2 flex-shrink-0"></i>
                    <span class="transition-all duration-300 opacity-100 whitespace-nowrap">GESTION DE COMMANDES</span>
                </div>
                <i id="chevron-commandes" class="fas fa-chevron-down text-sm transition-all duration-300 ease-in-out"></i>
            </div>
            <ul id="menu-commandes" class="ml-2 hidden transition-all duration-300 ease-in-out">
                <li>
                    <a href="{% url 'operatLogistic:home' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-home text-lg mr-3 transition-transform duration-200 flex-shrink-0" style="color: var(--logistic-text-light); opacity: 0.8;"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Tableau de bord</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:liste_commandes' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-truck text-lg mr-3 transition-transform duration-200 flex-shrink-0" style="color: var(--logistic-text-light); opacity: 0.8;"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Mes commandes</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:commandes_renvoyees_preparation' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-undo text-lg mr-3 transition-transform duration-200 flex-shrink-0" style="color: var(--logistic-text-light); opacity: 0.8;"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Renvoyées en préparation</span>
                    </a>
                </li>

            </ul>
        </div>
        
        <!-- Service Dropdown -->
        <div class="mb-2">
            <div id="dropdown-service" class="flex items-center justify-between px-4 py-2 cursor-pointer hover:bg-opacity-20 hover:bg-white transition-all duration-200" style="color: var(--logistic-text-light); opacity: 0.8; border-color: var(--logistic-border-accent);">
                <div class="flex items-center">
                    <i class="fas fa-concierge-bell mr-2 flex-shrink-0"></i>
                    <span class="transition-all duration-300 opacity-100 whitespace-nowrap">SERVICE</span>
                </div>
                <i id="chevron-service" class="fas fa-chevron-down text-sm transition-all duration-300 ease-in-out"></i>
            </div>
            <ul id="menu-service" class="ml-2 hidden transition-all duration-300 ease-in-out">
                <li>
                    <a href="{% url 'operatLogistic:commandes_reportees' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-clock text-lg mr-3 transition-transform duration-200 flex-shrink-0 text-yellow-400"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Reportées</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:commandes_livrees_partiellement' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-box-open text-lg mr-3 transition-transform duration-200 flex-shrink-0 text-blue-400"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Partiellement Livrées</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:commandes_livrees_avec_changement' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-exchange-alt text-lg mr-3 transition-transform duration-200 flex-shrink-0 text-purple-400"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Avec Changement</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:commandes_livrees' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-check-circle text-lg mr-3 transition-transform duration-200 flex-shrink-0 text-green-400"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Livrées</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:commandes_retournees' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-undo text-lg mr-3 transition-transform duration-200 flex-shrink-0 text-orange-500"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Retournées</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'operatLogistic:commandes_annulees_sav' %}" class="flex items-center px-4 py-3 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-times-circle text-lg mr-3 transition-transform duration-200 flex-shrink-0 text-red-500"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Annulées</span>
                    </a>
                </li>
            </ul>
        </div>



        <!-- Parametres Dropdown -->
        <div class="mb-2">
            <div id="dropdown-parametres" class="flex items-center justify-between px-4 py-2 cursor-pointer hover:bg-opacity-20 hover:bg-white transition-all duration-200" style="color: var(--logistic-text-light); opacity: 0.8; border-color: var(--logistic-border-accent);">
                <div class="flex items-center">
                    <i class="fas fa-cog mr-2 flex-shrink-0"></i>
                    <span class="transition-all duration-300 opacity-100 whitespace-nowrap">PARAMÈTRES</span>
                </div>
                <i id="chevron-parametres" class="fas fa-chevron-down text-sm transition-all duration-300 ease-in-out"></i>
            </div>
            <ul id="menu-parametres" class="ml-2 hidden transition-all duration-300 ease-in-out">
                <li>
                    <a href="{% url 'operatLogistic:profile' %}" class="flex items-center px-4 py-2 transition-all duration-200 transform hover:translate-x-1 border-l-4 border-transparent hover:shadow-lg" style="color: var(--logistic-text-light); hover:background-color: var(--logistic-hover-bg); hover:border-color: var(--logistic-border-accent);">
                        <i class="fas fa-user-cog mr-3 transition-transform duration-200 flex-shrink-0" style="color: var(--logistic-text-light); opacity: 0.8;"></i>
                        <span class="transition-all duration-300 opacity-100 whitespace-nowrap">Mon profil</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    
    <!-- Bouton de déconnexion avec animation -->
    <div class="flex-shrink-0 p-4 border-t" style="border-color: var(--logistic-border-accent);" id="logout-section">
        <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="flex items-center justify-center w-full px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg">
                <i class="fas fa-sign-out-alt mr-2 transition-transform duration-200 flex-shrink-0"></i>
                <span id="nav-text-logout" class="transition-all duration-300 opacity-100 whitespace-nowrap">Déconnexion</span>
            </button>
        </form>
    </div>
</div>

<!-- Script pour les dropdowns de la sidebar -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('🔧 Setting up sidebar dropdowns...');
    
    // Fonction simple pour les dropdowns
    function setupDropdown(dropdownId, menuId, chevronId) {
        const dropdown = document.getElementById(dropdownId);
        const menu = document.getElementById(menuId);
        const chevron = document.getElementById(chevronId);
        
        if (dropdown && menu && chevron) {
            dropdown.onclick = function(e) {
                e.preventDefault();
                
                if (menu.classList.contains('hidden')) {
                    menu.classList.remove('hidden');
                    menu.style.display = 'block';
                    chevron.style.transform = 'rotate(180deg)';
                } else {
                    menu.classList.add('hidden');
                    menu.style.display = 'none';
                    chevron.style.transform = 'rotate(0deg)';
                }
            };
        }
        }
        
    // Setup des dropdowns
    setupDropdown('dropdown-commandes', 'menu-commandes', 'chevron-commandes');
    setupDropdown('dropdown-service', 'menu-service', 'chevron-service');
    setupDropdown('dropdown-parametres', 'menu-parametres', 'chevron-parametres');
    
    console.log('✅ Sidebar dropdowns ready!');
});
</script>
