<!-- Onglet Chaussures & Stocks - KPIs Sp√©cialis√©s Yoozak -->
{% load static %}

<div class="space-y-6">
  <!-- En-t√™te -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-bold text-gray-900">Gestion Stocks</h2>
      <p class="text-gray-600">Stocks, rotation et analyse ABC</p>
    </div>
  </div>

  <!-- KPIs Stocks Principaux -->
  <div class="mb-6">
    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
      <i class="fas fa-tachometer-alt text-blue-600"></i>
      Indicateurs Critiques
    </h3>
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
      {% include 'kpis/components/kpi_card.html' with title='Stock Total' subtitle='Toutes pointures' value='2,847' unit='articles' icon='fas fa-boxes' color='blue' trend='+125' trend_label='nouvelles r√©ceptions' sub_value='Valeur: 1.84M DH' %}

      {% include 'kpis/components/kpi_card.html' with title='Alertes Stock' subtitle='Pointures populaires' value='12' unit='mod√®les' icon='fas fa-exclamation-triangle' color='orange' trend='-3' trend_label='vs hier' sub_value='Surtout 38-40' status='warning' alert='{"type": "warning", "message": "Stock critique d√©tect√©"}' %}

      {% include 'kpis/components/kpi_card.html' with title='Rotation Moyenne' subtitle="Vitesse d'√©coulement" value='--' unit='jours' icon='fas fa-sync-alt' color='green' trend='--' trend_label='plus rapide' sub_value='Chargement...' status='loading' %}

      {% include 'kpis/components/kpi_card.html' with title='Stock Mort' subtitle='>90j sans mouvement' value='--' unit='articles' icon='fas fa-exclamation-circle' color='red' trend='--' trend_label='vs mois dernier' sub_value='Chargement...' status='loading' %}
    </div>
  </div>

  <!-- KPIs Stocks Secondaires -->
  <div class="mb-8">
    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
      <i class="fas fa-chart-bar text-purple-600"></i>
      Actions & Performance
    </h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% include 'kpis/components/kpi_card.html' with title='Top Mod√®le' subtitle='Ventes du mois' value='--' unit='mod√®le' icon='fas fa-crown' color='yellow' trend='--' trend_label='best seller' sub_value='Chargement...' status='loading' size='large' %}

      {% include 'kpis/components/kpi_card.html' with title='R√©appro Urgent' subtitle='Commandes √† passer' value='--' unit='mod√®les' icon='fas fa-cart-plus' color='purple' trend='--' trend_label='requise' sub_value='Chargement...' status='loading' size='large' %}
    </div>
  </div>

  <!-- Analyse ABC & Pointures Critiques -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Heatmap Stock par Pointures -->
    <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
          <i class="fas fa-shoe-prints text-blue-600"></i>
          Stock par Pointures (Homme)
        </h3>
        <select class="text-sm border rounded-lg px-3 py-1">
          <option>Chaussures Homme</option>
          <option>Chaussures Femme</option>
          <option>Sandales</option>
          <option>Baskets</option>
        </select>
      </div>

      <!-- Grille de pointures avec niveaux de stock -->
      <div class="grid grid-cols-6 gap-2 mb-4">
        <div class="text-center p-3 bg-red-100 rounded-lg border border-red-200">
          <div class="font-bold text-red-800">38</div>
          <div class="text-xs text-red-600">8 paires</div>
          <div class="text-xs text-red-500">‚ö†Ô∏è Critique</div>
        </div>
        <div class="text-center p-3 bg-orange-100 rounded-lg border border-orange-200">
          <div class="font-bold text-orange-800">39</div>
          <div class="text-xs text-orange-600">15 paires</div>
          <div class="text-xs text-orange-500">‚ö° Bas</div>
        </div>
        <div class="text-center p-3 bg-yellow-100 rounded-lg border border-yellow-200">
          <div class="font-bold text-yellow-800">40</div>
          <div class="text-xs text-yellow-600">22 paires</div>
          <div class="text-xs text-yellow-500">‚ö° Bas</div>
        </div>
        <div class="text-center p-3 bg-green-100 rounded-lg border border-green-200">
          <div class="font-bold text-green-800">41</div>
          <div class="text-xs text-green-600">45 paires</div>
          <div class="text-xs text-green-500">‚úÖ OK</div>
        </div>
        <div class="text-center p-3 bg-green-100 rounded-lg border border-green-200">
          <div class="font-bold text-green-800">42</div>
          <div class="text-xs text-green-600">38 paires</div>
          <div class="text-xs text-green-500">‚úÖ OK</div>
        </div>
        <div class="text-center p-3 bg-blue-100 rounded-lg border border-blue-200">
          <div class="font-bold text-blue-800">43</div>
          <div class="text-xs text-blue-600">58 paires</div>
          <div class="text-xs text-blue-500">ÔøΩ √âlev√©</div>
        </div>
        <div class="text-center p-3 bg-green-100 rounded-lg border border-green-200">
          <div class="font-bold text-green-800">44</div>
          <div class="text-xs text-green-600">32 paires</div>
          <div class="text-xs text-green-500">‚úÖ OK</div>
        </div>
        <div class="text-center p-3 bg-blue-100 rounded-lg border border-blue-200">
          <div class="font-bold text-blue-800">45</div>
          <div class="text-xs text-blue-600">41 paires</div>
          <div class="text-xs text-blue-500">üîµ √âlev√©</div>
        </div>
        <div class="text-center p-3 bg-purple-100 rounded-lg border border-purple-200">
          <div class="font-bold text-purple-800">46</div>
          <div class="text-xs text-purple-600">28 paires</div>
          <div class="text-xs text-purple-500">üü£ Surplus</div>
        </div>
        <div class="text-center p-3 bg-purple-100 rounded-lg border border-purple-200">
          <div class="font-bold text-purple-800">47</div>
          <div class="text-xs text-purple-600">19 paires</div>
          <div class="text-xs text-purple-500">üü£ Surplus</div>
        </div>
        <div class="text-center p-3 bg-gray-100 rounded-lg border border-gray-200">
          <div class="font-bold text-gray-800">48</div>
          <div class="text-xs text-gray-600">12 paires</div>
          <div class="text-xs text-gray-500">‚ö´ Lent</div>
        </div>
        <div class="text-center p-3 bg-gray-100 rounded-lg border border-gray-200">
          <div class="font-bold text-gray-800">49</div>
          <div class="text-xs text-gray-600">6 paires</div>
          <div class="text-xs text-gray-500">‚ö´ Lent</div>
        </div>
      </div>

      <!-- L√©gende -->
      <div class="flex flex-wrap gap-2 text-xs">
        <span class="px-2 py-1 bg-red-100 text-red-800 rounded">‚ö†Ô∏è Critique <10</span>
        <span class="px-2 py-1 bg-orange-100 text-orange-800 rounded">‚ö° Bas 10-20</span>
        <span class="px-2 py-1 bg-green-100 text-green-800 rounded">‚úÖ OK 21-50</span>
        <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded">üîµ √âlev√© >50</span>
      </div>
    </div>

    <!-- Analyse ABC -->
    <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
      <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
        <i class="fas fa-chart-pie text-purple-600"></i>
        Analyse ABC - Classification
      </h3>

      <!-- Cat√©gories ABC -->
      <div class="space-y-4">
        <div class="border border-green-200 rounded-lg p-4 bg-green-50">
          <div class="flex justify-between items-center mb-2">
            <span class="font-bold text-green-800">Cat√©gorie A (High Value)</span>
            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">20% articles</span>
          </div>
          <div class="text-sm text-green-700">80% du CA ‚Ä¢ Pointures 38-42 ‚Ä¢ Suivi quotidien</div>
          <div class="flex justify-between mt-2 text-xs">
            <span>158 mod√®les</span>
            <span class="font-bold">1,472,000 DH CA</span>
          </div>
        </div>

        <div class="border border-blue-200 rounded-lg p-4 bg-blue-50">
          <div class="flex justify-between items-center mb-2">
            <span class="font-bold text-blue-800">Cat√©gorie B (Medium Value)</span>
            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">30% articles</span>
          </div>
          <div class="text-sm text-blue-700">15% du CA ‚Ä¢ Mix pointures ‚Ä¢ Suivi hebdomadaire</div>
          <div class="flex justify-between mt-2 text-xs">
            <span>237 mod√®les</span>
            <span class="font-bold">276,000 DH CA</span>
          </div>
        </div>

        <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
          <div class="flex justify-between items-center mb-2">
            <span class="font-bold text-gray-800">Cat√©gorie C (Low Value)</span>
            <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-sm">50% articles</span>
          </div>
          <div class="text-sm text-gray-700">5% du CA ‚Ä¢ Grandes pointures ‚Ä¢ Suivi mensuel</div>
          <div class="flex justify-between mt-2 text-xs">
            <span>395 mod√®les</span>
            <span class="font-bold">92,000 DH CA</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Top Mod√®les & Actions Urgentes -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Top 5 Mod√®les Best Sellers -->
    <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
      <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
        <i class="fas fa-medal text-yellow-600"></i>
        Top 5 Best Sellers
      </h3>
      <div class="space-y-3">
        <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
          <div>
            <div class="font-medium text-yellow-800">Derby Classic Cuir</div>
            <div class="text-sm text-gray-600">145 paires ‚Ä¢ 38-42</div>
          </div>
          <div class="text-right">
            <div class="font-bold text-yellow-600">87,000 DH</div>
            <div class="text-xs text-yellow-500">ü•á #1</div>
          </div>
        </div>

        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
          <div>
            <div class="font-medium text-blue-800">Baskets Urban</div>
            <div class="text-sm text-gray-600">128 paires ‚Ä¢ 39-43</div>
          </div>
          <div class="text-right">
            <div class="font-bold text-blue-600">76,800 DH</div>
            <div class="text-xs text-blue-500">ü•à #2</div>
          </div>
        </div>

        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
          <div>
            <div class="font-medium text-green-800">Sandales Premium</div>
            <div class="text-sm text-gray-600">112 paires ‚Ä¢ 37-41</div>
          </div>
          <div class="text-right">
            <div class="font-bold text-green-600">61,600 DH</div>
            <div class="text-xs text-green-500">ü•â #3</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions Urgentes -->
    <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
      <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
        <i class="fas fa-exclamation-triangle text-red-600"></i>
        Actions Urgentes
      </h3>
      <div class="space-y-3">
        <div class="border-l-4 border-red-500 pl-3 py-2 bg-red-50">
          <div class="font-medium text-red-800">R√©appro Imm√©diat</div>
          <div class="text-sm text-red-600">Derby Classic 38-40 (Stock: 8j)</div>
          <button class="text-xs text-red-500 underline mt-1">Commander maintenant ‚Üí</button>
        </div>

        <div class="border-l-4 border-orange-500 pl-3 py-2 bg-orange-50">
          <div class="font-medium text-orange-800">Stock Faible</div>
          <div class="text-sm text-orange-600">5 mod√®les sous seuil critique</div>
          <button class="text-xs text-orange-500 underline mt-1">Voir d√©tails ‚Üí</button>
        </div>

        <div class="border-l-4 border-purple-500 pl-3 py-2 bg-purple-50">
          <div class="font-medium text-purple-800">Stock Mort</div>
          <div class="text-sm text-purple-600">28 articles >90j immobiles</div>
          <button class="text-xs text-purple-500 underline mt-1">Lancer promo ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- Rotation & Performance -->
    <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
      <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
        <i class="fas fa-sync-alt text-green-600"></i>
        Rotation Stock
      </h3>
      <div class="space-y-4">
        <div class="text-center p-3 bg-green-50 rounded-lg">
          <div class="text-2xl font-bold text-green-600">18.5</div>
          <div class="text-sm text-gray-600">Jours rotation moyenne</div>
          <div class="text-xs text-green-500">-2.1j vs objectif</div>
        </div>

        <div class="space-y-2">
          <div class="flex justify-between items-center">
            <span class="text-sm">Rotation Rapide (<15j)</span>
            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">42%</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm">Rotation Normale (15-30j)</span>
            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">38%</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm">Rotation Lente (30-60j)</span>
            <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium">15%</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm">Stock Mort (>90j)</span>
            <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium">5%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
