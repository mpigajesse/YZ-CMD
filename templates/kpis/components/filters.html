<!-- Syst√®me de Filtres KPIs Yoozak -->
<div class="bg-white rounded-xl shadow-lg p-6 mb-6 border border-gray-100">
  <div class="flex flex-wrap items-center justify-between gap-4">
    <!-- Filtres Principaux -->
    <div class="flex flex-wrap items-center gap-4">
      <!-- Filtre P√©riode -->
      <div class="relative">
        <label class="block text-sm font-medium text-gray-700 mb-2">üìÖ P√©riode</label>
        <select id="periode-filter" class="w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
          <option value="today">Aujourd'hui</option>
          <option value="7days">7 derniers jours</option>
          <option value="30days" selected>30 derniers jours</option>
          <option value="3months">3 derniers mois</option>
          <option value="year">Cette ann√©e</option>
          <option value="custom">P√©riode personnalis√©e</option>
        </select>
      </div>

      <!-- Filtre R√©gion (Maroc d√©taill√©) -->
      <div class="relative">
        <label class="block text-sm font-medium text-gray-700 mb-2">üåç R√©gion</label>
        <select id="region-filter" class="w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
          <option value="all">Tout le Maroc</option>
          <option value="casablanca-settat">Casablanca-Settat</option>
          <option value="rabat-sale-kenitra">Rabat-Sal√©-K√©nitra</option>
          <option value="fes-meknes">F√®s-Mekn√®s</option>
          <option value="marrakech-safi">Marrakech-Safi</option>
          <option value="tanger-tetouan">Tanger-T√©touan-Al Hoce√Øma</option>
          <option value="souss-massa">Souss-Massa</option>
          <option value="oriental">Oriental</option>
          <option value="beni-mellal">B√©ni Mellal-Kh√©nifra</option>
          <option value="draa-tafilalet">Dr√¢a-Tafilalet</option>
          <option value="laayoune">La√¢youne-Sakia El Hamra</option>
          <option value="dakhla">Dakhla-Oued Ed-Dahab</option>
          <option value="guelmim">Guelmim-Oued Noun</option>
        </select>
      </div>

      <!-- Filtre Cat√©gorie Chaussures -->
      <div class="relative">
        <label class="block text-sm font-medium text-gray-700 mb-2">üëü Cat√©gorie</label>
        <select id="categorie-filter" class="w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
          <option value="all">Toutes cat√©gories</option>
          <option value="chaussures-homme">Chaussures Homme</option>
          <option value="chaussures-femme">Chaussures Femme</option>
          <option value="sandales">Sandales</option>
          <option value="baskets">Baskets</option>
        </select>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex items-center gap-3">
      <!-- Recherche rapide -->
      <div class="relative">
        <input type="text" id="search-filter" placeholder="üîç Recherche rapide..." class="w-64 px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" />
        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
      </div>

      <!-- Boutons d'action -->
      <button id="compare-btn" class="px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-all duration-200 flex items-center gap-2">
        <i class="fas fa-chart-line"></i>
        Comparer
      </button>

      <button id="refresh-btn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 flex items-center gap-2">
        <i class="fas fa-sync-alt"></i>
        Actualiser
      </button>

      <button id="settings-btn" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-200"><i class="fas fa-cog"></i></button>
    </div>
  </div>

  <!-- Filtres Avanc√©s (collapsible) -->
  <div id="advanced-filters" class="mt-4 pt-4 border-t border-gray-200 hidden">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <!-- Zone Tarifaire -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">üöö Zone Livraison</label>
        <select id="zone-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
          <option value="all">Toutes zones</option>
          <option value="20dh">Zone A (20DH)</option>
          <option value="30dh">Zone B (30DH)</option>
          <option value="35dh">Zone B+ (35DH)</option>
          <option value="40dh">Zone C (40DH)</option>
          <option value="50dh">Zone C+ (50DH)</option>
        </select>
      </div>

      <!-- Pointures -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">üë† Pointures</label>
        <select id="pointure-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
          <option value="all">Toutes pointures</option>
          <option value="37-41">37-41 (Range principale)</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="autres">Autres pointures</option>
        </select>
      </div>

      <!-- Mat√©riau -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">üêÑ Mat√©riau</label>
        <select id="materiau-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
          <option value="all">Tous mat√©riaux</option>
          <option value="cuir-veritable">Cuir V√©ritable</option>
          <option value="autres">Autres mat√©riaux</option>
        </select>
      </div>

      <!-- Montant -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">üí∞ Montant</label>
        <div class="flex gap-2">
          <input type="number" id="montant-min" placeholder="Min" class="w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" />
          <input type="number" id="montant-max" placeholder="Max" class="w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" />
        </div>
      </div>
    </div>

    <!-- Toggle pour filtres avanc√©s -->
    <div class="mt-4 flex justify-between items-center">
      <button id="reset-filters" class="text-red-600 hover:text-red-800 transition-colors duration-200"><i class="fas fa-undo"></i> Reset tous les filtres</button>
      <button id="toggle-advanced" class="text-blue-600 hover:text-blue-800 transition-colors duration-200"><i class="fas fa-chevron-up"></i> Masquer filtres avanc√©s</button>
    </div>
  </div>

  <!-- Toggle pour afficher/masquer filtres avanc√©s -->
  <div class="mt-4 text-center" id="show-advanced-toggle">
    <button id="show-advanced" class="text-blue-600 hover:text-blue-800 transition-colors duration-200"><i class="fas fa-chevron-down"></i> Afficher filtres avanc√©s</button>
  </div>
</div>

<!-- JavaScript pour la gestion des filtres -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Toggle filtres avanc√©s
    const showAdvanced = document.getElementById('show-advanced')
    const hideAdvanced = document.getElementById('toggle-advanced')
    const advancedFilters = document.getElementById('advanced-filters')
    const showAdvancedToggle = document.getElementById('show-advanced-toggle')
  
    showAdvanced?.addEventListener('click', function () {
      advancedFilters.classList.remove('hidden')
      showAdvancedToggle.classList.add('hidden')
    })
  
    hideAdvanced?.addEventListener('click', function () {
      advancedFilters.classList.add('hidden')
      showAdvancedToggle.classList.remove('hidden')
    })
  
    // Reset filtres
    document.getElementById('reset-filters')?.addEventListener('click', function () {
      // Reset tous les selects √† leur valeur par d√©faut
      document.querySelectorAll('select').forEach((select) => {
        select.selectedIndex = 0
      })
      // Reset les inputs
      document.querySelectorAll('input[type="number"], input[type="text"]').forEach((input) => {
        input.value = ''
      })
      // Trigger update
      updateKPIs()
    })
  
    // Actualiser
    document.getElementById('refresh-btn')?.addEventListener('click', function () {
      updateKPIs()
    })
  })
  
  // Fonction pour mettre √† jour les KPIs (√† impl√©menter)
  function updateKPIs() {
    // Collecter tous les filtres
    const filters = {
      periode: document.getElementById('periode-filter')?.value,
      region: document.getElementById('region-filter')?.value,
      categorie: document.getElementById('categorie-filter')?.value,
      zone: document.getElementById('zone-filter')?.value,
      pointure: document.getElementById('pointure-filter')?.value,
      materiau: document.getElementById('materiau-filter')?.value,
      montantMin: document.getElementById('montant-min')?.value,
      montantMax: document.getElementById('montant-max')?.value,
      search: document.getElementById('search-filter')?.value
    }
  
    console.log('Mise √† jour KPIs avec filtres:', filters)
    // Ici on fera l'appel AJAX pour mettre √† jour les donn√©es
  }
</script>
